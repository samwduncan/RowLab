---
phase: 17-design-overhaul
plan: 04
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/v2/utils/animations.ts
  - src/v2/styles/animations.css
autonomous: true

must_haves:
  truths:
    - "SPRING_CONFIG uses stiffness 400, damping 17 per CONTEXT.md specification"
    - "SPRING_FAST uses stiffness 500, damping 25 for micro-interactions"
    - "SPRING_GENTLE uses stiffness 300, damping 20 for subtle animations"
    - "CSS keyframe animations exist for success pulses and shimmer effects"
  artifacts:
    - path: "src/v2/utils/animations.ts"
      provides: "Centralized spring physics constants"
      contains: "stiffness: 400"
    - path: "src/v2/styles/animations.css"
      provides: "CSS keyframe animations for non-spring effects"
      contains: "@keyframes"
  key_links:
    - from: "animations.ts"
      to: "framer-motion"
      via: "spring config objects"
      pattern: "type: 'spring'"
---

<objective>
Establish the standardized animation system per CONTEXT.md specifications.

Purpose: Consistent animations create the "tactile" feel of the Rowing Instrument aesthetic. Spring physics make interactions feel physical and intentional. This plan updates the animation constants to match the spec and adds CSS animations for effects that don't need JS.

Output: Updated animations.ts with correct spring values, new animations.css with keyframes for success/shimmer/live-data effects
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/17-design-overhaul/17-CONTEXT.md
@src/v2/utils/animations.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update spring physics constants in animations.ts</name>
  <files>src/v2/utils/animations.ts</files>
  <action>
Update the spring configurations to match CONTEXT.md specifications:

**SPRING_CONFIG (standard interactions):**
```typescript
/**
 * Standard spring physics - drag-drop, modal transitions, general interactions
 * Per CONTEXT.md: stiffness 400, damping 17
 */
export const SPRING_CONFIG = {
  type: 'spring' as const,
  stiffness: 400,
  damping: 17,
} as const;
```

**SPRING_FAST (micro-interactions):**
```typescript
/**
 * Fast spring for micro-interactions - button hover/tap, focus states
 * Per CONTEXT.md: stiffness 500, damping 25
 */
export const SPRING_FAST = {
  type: 'spring' as const,
  stiffness: 500,
  damping: 25,
} as const;
```

**SPRING_GENTLE (subtle animations):**
```typescript
/**
 * Gentle spring for subtle animations - fade reveals, list transitions
 * Per CONTEXT.md: stiffness 300, damping 20
 */
export const SPRING_GENTLE = {
  type: 'spring' as const,
  stiffness: 300,
  damping: 20,
} as const;
```

Add new animation presets for common patterns:

```typescript
/**
 * Button press animation - tactile 0.96 scale on tap
 */
export const BUTTON_PRESS = {
  whileTap: { scale: 0.96 },
  transition: SPRING_FAST,
} as const;

/**
 * Card hover animation - subtle lift with shadow
 */
export const CARD_HOVER = {
  whileHover: { scale: 1.01, y: -2 },
  transition: SPRING_CONFIG,
} as const;

/**
 * Drag overlay animation - lift with shadow expansion
 */
export const DRAG_LIFT = {
  scale: 1.02,
  boxShadow: '0 20px 25px -5px rgba(15, 15, 15, 0.3)',
  cursor: 'grabbing',
} as const;

/**
 * Modal enter/exit animation variants
 */
export const MODAL_VARIANTS = {
  hidden: { opacity: 0, scale: 0.95, y: 10 },
  visible: { opacity: 1, scale: 1, y: 0 },
  exit: { opacity: 0, scale: 0.95, y: 10 },
} as const;

/**
 * Slide panel variants (for side panels/drawers)
 */
export const SLIDE_PANEL_VARIANTS = {
  hidden: { x: '100%' },
  visible: { x: 0 },
  exit: { x: '100%' },
} as const;
```

Keep existing usePrefersReducedMotion hook and getAnimationConfig function.
Remove restDelta and restSpeed from SPRING_CONFIG (not needed, were causing issues).
  </action>
  <verify>
grep "stiffness: 400" src/v2/utils/animations.ts returns match
grep "damping: 17" src/v2/utils/animations.ts returns match
grep "SPRING_GENTLE" src/v2/utils/animations.ts returns match
grep "BUTTON_PRESS" src/v2/utils/animations.ts returns match
  </verify>
  <done>
animations.ts has updated spring configs matching CONTEXT.md and new animation presets
  </done>
</task>

<task type="auto">
  <name>Task 2: Create CSS keyframe animations</name>
  <files>src/v2/styles/animations.css</files>
  <action>
Create a new CSS file for keyframe animations that don't need JavaScript:

```css
/**
 * CSS Keyframe Animations
 * Non-spring animations for effects like shimmer, pulse, and live data updates
 */

/* ========================================
   SUCCESS ANIMATIONS
   ======================================== */

/* Success pulse - subtle green glow for confirmations */
@keyframes success-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
  }
}

.v2 .animate-success-pulse {
  animation: success-pulse 0.6s ease-out;
}

/* Gold wash for PRs/achievements */
@keyframes gold-wash {
  0% {
    background-color: transparent;
  }
  20% {
    background-color: rgba(245, 158, 11, 0.15);
  }
  100% {
    background-color: transparent;
  }
}

.v2 .animate-gold-wash {
  animation: gold-wash 1.5s ease-out;
}

/* ========================================
   LOADING ANIMATIONS
   ======================================== */

/* Single shimmer effect for skeletons */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.v2 .animate-shimmer {
  position: relative;
  overflow: hidden;
}

.v2 .animate-shimmer::after {
  content: '';
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.08),
    transparent
  );
  animation: shimmer 1.5s infinite;
}

/* Light theme shimmer */
.v2[data-theme="light"] .animate-shimmer::after {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(0, 0, 0, 0.04),
    transparent
  );
}

/* ========================================
   LIVE DATA ANIMATIONS
   ======================================== */

/* Number change flash */
@keyframes number-flash {
  0% {
    color: var(--color-rowing-gold);
    transform: scale(1.05);
  }
  100% {
    color: var(--color-text-primary);
    transform: scale(1);
  }
}

.v2 .animate-number-flash {
  animation: number-flash 0.4s ease-out;
}

/* Improvement indicator (green up) */
@keyframes improvement-flash {
  0% {
    color: var(--color-rowing-starboard);
    transform: scale(1.1);
  }
  100% {
    color: var(--color-text-primary);
    transform: scale(1);
  }
}

.v2 .animate-improvement {
  animation: improvement-flash 0.5s ease-out;
}

/* Decline indicator (red down) */
@keyframes decline-flash {
  0% {
    color: var(--color-rowing-port);
    transform: scale(0.95);
  }
  100% {
    color: var(--color-text-primary);
    transform: scale(1);
  }
}

.v2 .animate-decline {
  animation: decline-flash 0.5s ease-out;
}

/* ========================================
   ATTENTION ANIMATIONS
   ======================================== */

/* Subtle bounce for drawing attention */
@keyframes attention-bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.v2 .animate-attention-bounce {
  animation: attention-bounce 0.5s ease-in-out;
}

/* Badge pop for achievements */
@keyframes badge-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.v2 .animate-badge-pop {
  animation: badge-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* ========================================
   REDUCED MOTION SUPPORT
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .v2 .animate-success-pulse,
  .v2 .animate-gold-wash,
  .v2 .animate-shimmer::after,
  .v2 .animate-number-flash,
  .v2 .animate-improvement,
  .v2 .animate-decline,
  .v2 .animate-attention-bounce,
  .v2 .animate-badge-pop {
    animation: none;
  }
}
```

This file should be imported in the main V2 styles.
  </action>
  <verify>
grep "@keyframes success-pulse" src/v2/styles/animations.css returns match
grep "prefers-reduced-motion" src/v2/styles/animations.css returns match
grep "animate-gold-wash" src/v2/styles/animations.css returns match
  </verify>
  <done>
animations.css contains success pulse, gold wash, shimmer, live data, and attention animations with reduced motion support
  </done>
</task>

<task type="auto">
  <name>Task 3: Import animations.css in V2 styles</name>
  <files>src/v2/styles/index.css</files>
  <action>
Add import for the new animations.css file in the V2 styles index.

If src/v2/styles/index.css exists, add:
```css
@import './animations.css';
```

If it doesn't exist, find where V2 styles are aggregated (likely in a main CSS file or component) and ensure animations.css is imported there.

The import should be placed after tokens.css and theme files, but before component-specific styles.
  </action>
  <verify>
grep "animations.css" src/v2/styles/index.css returns match OR
grep "animations" src/v2/App.tsx or similar entry point shows import
  </verify>
  <done>
animations.css is imported and available to all V2 components
  </done>
</task>

</tasks>

<verification>
1. SPRING_CONFIG has stiffness: 400, damping: 17
2. SPRING_FAST has stiffness: 500, damping: 25
3. SPRING_GENTLE has stiffness: 300, damping: 20
4. animations.css exists with keyframes for success-pulse, gold-wash, shimmer
5. Reduced motion support in both JS (hook) and CSS (@media query)
6. animations.css is imported in V2 styles
</verification>

<success_criteria>
- Spring physics match CONTEXT.md specification exactly
- Preset animation objects available for buttons, cards, modals
- CSS animations available for success confirmations, loading states, live data updates
- All animations respect reduced motion preference
- No deprecated animation values (restDelta, restSpeed)
</success_criteria>

<output>
After completion, create `.planning/phases/17-design-overhaul/17-04-SUMMARY.md`
</output>
