---
phase: 17-design-overhaul
plan: 05
type: execute
wave: 3
depends_on: ["17-01", "17-03", "17-04"]
files_modified:
  - src/v2/components/ui/Button.tsx
  - src/v2/components/ui/Card.tsx
  - src/v2/components/ui/Toggle.tsx
autonomous: true

must_haves:
  truths:
    - "Buttons have tactile press state (scale 0.96 on tap)"
    - "Cards have consistent warm borders and hover lift"
    - "Toggle has smooth spring animation with glow effect"
    - "All components use warm stone palette tokens"
  artifacts:
    - path: "src/v2/components/ui/Button.tsx"
      provides: "Tactile button with 0.96 scale press"
      contains: "scale: 0.96"
    - path: "src/v2/components/ui/Card.tsx"
      provides: "Card with warm borders and hover animation"
      contains: "CARD_HOVER"
    - path: "src/v2/components/ui/Toggle.tsx"
      provides: "Toggle with spring animation"
      contains: "SPRING_CONFIG"
  key_links:
    - from: "Button.tsx"
      to: "animations.ts"
      via: "BUTTON_PRESS import"
      pattern: "BUTTON_PRESS"
---

<objective>
Update core UI components (Button, Card, Toggle) with tactile animations and warm palette integration.

Purpose: The "Rowing Instrument" aesthetic requires components that feel physical and intentional. Buttons should have satisfying press feedback, cards should lift on hover, and toggles should snap with spring physics. This creates the "would you show this to a friend" quality bar.

Output: Updated Button.tsx, Card.tsx, Toggle.tsx with tactile animations and warm palette
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/17-design-overhaul/17-CONTEXT.md
@src/v2/components/ui/Button.tsx
@src/v2/components/ui/Card.tsx
@src/v2/components/ui/Toggle.tsx
@src/v2/utils/animations.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Button.tsx with tactile press state</name>
  <files>src/v2/components/ui/Button.tsx</files>
  <action>
Update Button component to use CONTEXT.md-specified tactile feedback:

1. Import the new animation presets:
```typescript
import {
  SPRING_FAST,
  BUTTON_PRESS,
  usePrefersReducedMotion
} from '../../utils/animations';
```

2. Update whileTap to use 0.96 scale per CONTEXT.md:
```typescript
const motionProps = prefersReducedMotion
  ? {}
  : {
      whileHover: isDisabled ? {} : { scale: 1.02 },
      whileTap: isDisabled ? {} : { scale: 0.96 }, // Tactile press per CONTEXT.md
      transition: SPRING_FAST,
    };
```

3. Update variant styles to use CSS variable format that works with warm palette:
```typescript
const variantStyles: Record<ButtonVariant, string> = {
  primary: `
    bg-[var(--color-interactive-primary)] text-white
    hover:bg-[var(--color-interactive-hover)]
    active:bg-[var(--color-interactive-active)]
    disabled:bg-[var(--color-interactive-disabled)] disabled:text-[var(--color-text-muted)]
    shadow-sm hover:shadow-md
  `,
  secondary: `
    bg-[var(--color-bg-surface-elevated)] text-[var(--color-text-primary)]
    border border-[var(--color-border-default)]
    hover:bg-[var(--color-bg-hover)] hover:border-[var(--color-border-strong)]
    active:bg-[var(--color-bg-active)]
    disabled:bg-[var(--color-bg-surface)] disabled:text-[var(--color-text-muted)] disabled:border-[var(--color-border-subtle)]
  `,
  ghost: `
    bg-transparent text-[var(--color-text-primary)]
    hover:bg-[var(--color-bg-hover)]
    active:bg-[var(--color-bg-active)]
    disabled:text-[var(--color-text-muted)] disabled:bg-transparent
  `,
  danger: `
    bg-[var(--color-status-error)] text-white
    hover:brightness-110
    active:brightness-90
    disabled:bg-[var(--color-interactive-disabled)] disabled:text-[var(--color-text-muted)]
    shadow-sm hover:shadow-md
  `,
  outline: `
    bg-transparent text-[var(--color-interactive-primary)]
    border border-[var(--color-interactive-primary)]
    hover:bg-[var(--color-interactive-primary)]/10
    active:bg-[var(--color-interactive-primary)]/20
    disabled:text-[var(--color-text-muted)] disabled:border-[var(--color-border-subtle)] disabled:bg-transparent
  `,
};
```

4. Update IconButton similarly with 0.96 tap scale.

5. Add subtle shadow on hover for primary/danger buttons.
  </action>
  <verify>
grep "scale: 0.96" src/v2/components/ui/Button.tsx returns match
grep "SPRING_FAST" src/v2/components/ui/Button.tsx returns match
grep "shadow-sm hover:shadow-md" src/v2/components/ui/Button.tsx returns match
  </verify>
  <done>
Button.tsx has tactile 0.96 press scale, warm palette tokens, and subtle shadow hover
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Card.tsx with hover lift and warm borders</name>
  <files>src/v2/components/ui/Card.tsx</files>
  <action>
Update Card component with hover animation and warm palette:

1. Import animation presets:
```typescript
import { motion } from 'framer-motion';
import { SPRING_CONFIG, CARD_HOVER, usePrefersReducedMotion } from '../../utils/animations';
```

2. Add hover lift animation option:
```typescript
export interface CardProps extends React.HTMLAttributes<HTMLDivElement> {
  variant?: 'default' | 'elevated' | 'outline';
  hoverable?: boolean;
  selected?: boolean;
  children: React.ReactNode;
}
```

3. Implement motion wrapper when hoverable:
```typescript
export const Card = forwardRef<HTMLDivElement, CardProps>(
  ({ variant = 'default', hoverable = false, selected = false, className, children, ...props }, ref) => {
    const prefersReducedMotion = usePrefersReducedMotion();

    const baseStyles = `
      rounded-xl p-4
      border border-[var(--color-border-subtle)]
      bg-[var(--color-card-bg)]
      transition-colors duration-150
    `;

    const variantStyles = {
      default: '',
      elevated: 'shadow-md',
      outline: 'bg-transparent border-[var(--color-border-default)]',
    };

    const selectedStyles = selected
      ? 'border-[var(--color-interactive-primary)] ring-2 ring-[var(--color-interactive-primary)]/20'
      : '';

    const hoverableStyles = hoverable && !selected
      ? 'hover:border-[var(--color-border-strong)] hover:bg-[var(--color-card-hover)] cursor-pointer'
      : '';

    const combinedClassName = cn(
      baseStyles,
      variantStyles[variant],
      selectedStyles,
      hoverableStyles,
      className
    );

    // Use motion div only when hoverable for performance
    if (hoverable && !prefersReducedMotion) {
      return (
        <motion.div
          ref={ref}
          className={combinedClassName}
          whileHover={{ scale: 1.01, y: -2 }}
          transition={SPRING_CONFIG}
          {...props}
        >
          {children}
        </motion.div>
      );
    }

    return (
      <div ref={ref} className={combinedClassName} {...props}>
        {children}
      </div>
    );
  }
);
```

4. Export CardHeader, CardContent, CardFooter sub-components if not already present:
```typescript
export const CardHeader: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (
  <div className={cn('pb-3 border-b border-[var(--color-border-subtle)]', className)} {...props} />
);

export const CardContent: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (
  <div className={cn('py-4', className)} {...props} />
);

export const CardFooter: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (
  <div className={cn('pt-3 border-t border-[var(--color-border-subtle)] flex justify-end gap-2', className)} {...props} />
);
```
  </action>
  <verify>
grep "hoverable" src/v2/components/ui/Card.tsx returns match
grep "SPRING_CONFIG" src/v2/components/ui/Card.tsx returns match
grep "scale: 1.01" src/v2/components/ui/Card.tsx returns match
  </verify>
  <done>
Card.tsx has hoverable prop with subtle lift animation and warm border tokens
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Toggle.tsx with spring physics and glow</name>
  <files>src/v2/components/ui/Toggle.tsx</files>
  <action>
Update Toggle component with satisfying spring animation:

1. Import animation config:
```typescript
import { motion } from 'framer-motion';
import { SPRING_CONFIG, usePrefersReducedMotion } from '../../utils/animations';
```

2. Add glow effect when enabled:
```typescript
const trackStyles = enabled
  ? `
    bg-[var(--color-interactive-primary)]
    shadow-[0_0_8px_var(--color-interactive-primary)]
  `
  : `
    bg-[var(--color-border-default)]
  `;
```

3. Use spring physics for thumb movement:
```typescript
const thumbMotion = prefersReducedMotion
  ? {}
  : {
      layout: true,
      transition: SPRING_CONFIG,
    };

// In render:
<motion.span
  className={cn(
    'block rounded-full bg-white shadow-md',
    sizeStyles[size].thumb,
    enabled && 'translate-x-full'
  )}
  {...thumbMotion}
/>
```

4. Add pressed state feedback:
```typescript
const pressedStyles = isPressed ? 'scale-95' : '';
```

5. Ensure warm palette tokens are used for all colors.
  </action>
  <verify>
grep "SPRING_CONFIG" src/v2/components/ui/Toggle.tsx returns match
grep "shadow-\\[0_0_8px" src/v2/components/ui/Toggle.tsx returns match (glow effect)
  </verify>
  <done>
Toggle.tsx has spring physics thumb movement and glow effect when enabled
  </done>
</task>

</tasks>

<verification>
1. Button whileTap uses scale: 0.96
2. Button has shadow-sm hover:shadow-md on primary variant
3. Card has hoverable prop with scale: 1.01 and y: -2 animation
4. Card uses SPRING_CONFIG for hover transition
5. Toggle has SPRING_CONFIG for thumb movement
6. Toggle has glow shadow when enabled
7. All components use CSS variable tokens (var(--color-*))
</verification>

<success_criteria>
- Buttons feel tactile with satisfying press feedback
- Cards lift subtly on hover, making them feel interactive
- Toggles snap satisfyingly with visible glow feedback
- All animations respect reduced motion preference
- Components use warm palette tokens exclusively
</success_criteria>

<output>
After completion, create `.planning/phases/17-design-overhaul/17-05-SUMMARY.md`
</output>
