---
phase: 19-penpot-design-system
plan: 08
type: execute
wave: 3
depends_on: ["19-01"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "Lineup builder shows drag-drop interface with athlete bank and boat view"
    - "Seat validation warnings are visible inline"
    - "Boat biometrics panel shows real-time averages"
  artifacts:
    - path: "Penpot: 04-App-UI-Dashboard/Lineup-Builder"
      provides: "Full lineup builder interface design"
    - path: "Penpot: 04-App-UI-Dashboard/Lineup-Mobile"
      provides: "Mobile lineup view with tap-to-select"
  key_links:
    - from: "Seat slots"
      to: "Port/Starboard colors"
      via: "side validation indicators"
    - from: "Biometrics"
      to: "Metric/* typography"
      via: "uses Geist Mono for averages"
    - from: "Lineup components"
      to: "src/v2/components/lineup/*"
      via: "follows existing component patterns"
---

<objective>
Design lineup builder interface with drag-drop seats, validation warnings, and biometrics panel.

Purpose: Create intuitive boat configuration interface matching existing implementation
Output: Lineup builder mockups for desktop and mobile
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-penpot-design-system/19-RESEARCH.md
@.planning/phases/19-penpot-design-system/19-01-SUMMARY.md
@src/v2/pages/LineupBuilderPage.tsx
@src/v2/components/lineup/LineupWorkspace.tsx
@src/v2/components/lineup/AthleteBank.tsx
@src/v2/components/lineup/BoatView.tsx
@src/v2/components/lineup/SeatSlot.tsx
@src/v2/components/lineup/SeatWarningBadge.tsx
@src/v2/components/lineup/BiometricsPanel.tsx
@src/v2/components/lineup/MobileLineupBuilder.tsx
@src/v2/components/lineup/MobileSeatSlot.tsx
@src/v2/components/lineup/MobileAthleteSelector.tsx
@src/v2/components/lineup/MarginVisualizer.tsx
</context>

<reference_implementation>
Review existing V2 lineup components to match implementation patterns:
- LineupWorkspace.tsx: Three-panel layout structure
- AthleteBank.tsx: Athlete list, search, filtering, draggable cards
- BoatView.tsx: Vertical boat diagram, seat arrangement
- SeatSlot.tsx: Seat states (empty, filled, drag-over, invalid)
- SeatWarningBadge.tsx: Validation warning badges
- BiometricsPanel.tsx: Averages calculation, metrics display
- MobileLineupBuilder.tsx: Tap-to-select workflow
- MobileAthleteSelector.tsx: Bottom sheet athlete picker
- MarginVisualizer.tsx: Boat comparison visualization

Mockups should visualize existing component architecture, not redesign it.
</reference_implementation>

<tasks>

<task type="auto">
  <name>Task 1: Design lineup builder main view</name>
  <files>Penpot frames (via MCP)</files>
  <action>
Create lineup builder page (1440x900 viewport, per LineupWorkspace.tsx):

Layout structure:
- Left panel: Athlete Bank (320px width, per AthleteBank.tsx)
- Center: Boat View (flexible, ~700px, per BoatView.tsx)
- Right panel: Biometrics Panel (240px width, per BiometricsPanel.tsx)
- Top toolbar: lineup controls

Top toolbar:
- Boat class selector: dropdown (8+, 4+, 2x, 1x, etc.)
- Lineup name: editable text
- Actions: Save, Duplicate, Export PDF, History
- Undo/Redo buttons with keyboard hint (Ctrl+Z)

Athlete Bank (left panel, per AthleteBank.tsx):
- Search input at top
- Filter tabs: All, Port, Starboard
- Scrollable athlete list
- Athlete card: small (avatar + name + side badge)
  - 48px height per athlete
  - Draggable indicator (grip icon)
- Empty bank: "All athletes assigned" success state

Boat View (center, per BoatView.tsx):
- Vertical boat diagram (bow at top, stern at bottom)
- Seat slots arranged vertically
- 8+ example: Coxswain, Stroke, 7, 6, 5, 4, 3, 2, Bow
- Each seat slot (per SeatSlot.tsx):
  - ~200x60px
  - Left side: seat number/position
  - Center: athlete name OR "Empty" placeholder
  - Right: validation badges/warnings

Seat slot states (per SeatSlot.tsx):
- Empty: dashed border, Ink/Border, "Drop athlete" text
- Filled: solid border, athlete name + avatar
- Drag-over: border-color blue, background highlight
- Invalid: amber border, warning icon
- Error: red border (wrong side preference)

Validation warnings (per SeatWarningBadge.tsx):
- Wrong side: amber badge "Port athlete in Starboard seat"
- Missing skills: "Not coxswain-qualified"
- Show as small pill next to athlete name

Boat shell silhouette:
- SVG boat outline above seats
- 8+ proportions (180 units length)
- Subtle Ink/Muted color
  </action>
  <verify>
Lineup builder frame shows three-panel layout with boat view and athlete bank matching V2 component structure.
  </verify>
  <done>
Lineup builder main view designed with drag-drop layout and seat validation following existing implementation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Design biometrics panel and boat comparison</name>
  <files>Penpot frames (via MCP)</files>
  <action>
Create biometrics panel (right side, 240px, per BiometricsPanel.tsx):

Panel header:
- Title: "Boat Stats"
- Collapse/expand toggle

Metrics section:
- Average Height: Metric/Medium, value + "ft/in" or "cm"
- Average Weight: Metric/Medium
- Combined Wingspan: Metric/Medium
- Average 2k Split: Metric/Medium, chromatic color
- Heaviest/Lightest spread

Per-seat breakdown (optional expandable):
- Mini table: Seat, Name, Height, Weight
- Highlight outliers

Balance indicator:
- Visual: port vs starboard weight balance
- Bar chart or scale graphic
- "Balanced" or "Port-heavy" label

Boat comparison view (per MarginVisualizer.tsx):
- Side-by-side layout (2 boats)
- Shell silhouettes with calculated margins
- Time difference display
- Margin terminology: "Dead heat", "Canvas", "1/4 length"
- Rowing-specific margin scale

Margin visualizer details:
- Two boat SVGs
- Gap scaled to margin
- Color-coded (lead boat highlighted)
- Time diff: Metric/Large
  </action>
  <verify>
Biometrics panel and comparison view frames exist with proper metric display matching V2 components.
  </verify>
  <done>
Biometrics panel designed with averages and boat comparison visualizer created.
  </done>
</task>

<task type="auto">
  <name>Task 3: Design mobile lineup view</name>
  <files>Penpot frames (via MCP)</files>
  <action>
Create mobile lineup builder (375x812 viewport, per MobileLineupBuilder.tsx):

Mobile-specific design:
- NO drag-drop on mobile (per Phase 8 decision)
- Tap-to-select workflow instead

Mobile layout:
- Full-width boat view (scrollable vertically)
- Bottom sheet for athlete selection (per MobileAthleteSelector.tsx)

Boat view (mobile, per MobileSeatSlot.tsx):
- Simplified seat slots (full-width cards)
- Seat card: 64px height, tap to select
- Shows: Position, Athlete (or "Tap to assign")
- Side badge visible

Bottom sheet (when seat tapped, per MobileAthleteSelector.tsx):
- Slides up to 80% viewport height
- Title: "Select athlete for Stroke"
- Search input
- Athlete list (scrollable)
- Filter toggles: Port/Starboard
- Tap athlete to assign, sheet closes

Mobile toolbar:
- Simplified: boat class dropdown + save button
- Hamburger menu for secondary actions

Mobile biometrics:
- Collapsible accordion or separate "Stats" tab
- Show key metrics in compact format

Empty seat state:
- "Tap to assign" placeholder
- Subtle animation suggestion

Touch targets:
- All interactive elements >= 44px
- Ample spacing between seats
  </action>
  <verify>
Mobile lineup frame shows tap-to-select workflow with bottom sheet matching V2 mobile components.
  </verify>
  <done>
Mobile lineup designed with touch-optimized tap-to-select pattern (no drag-drop).
  </done>
</task>

</tasks>

<verification>
- Desktop lineup builder with three-panel layout
- Seat slots with all states (empty, filled, drag-over, invalid)
- Biometrics panel with calculated averages
- Boat comparison/margin visualizer
- Mobile view with tap-to-select bottom sheet
- All touch targets >= 44px on mobile
- Designs match existing V2 lineup components
</verification>

<success_criteria>
1. Matches existing lineup builder implementation from Phase 8
2. Port/Starboard validation visually clear
3. Biometrics use Metric typography
4. Mobile uses tap-to-select (not drag-drop)
5. Shell silhouettes and margin viz documented
6. Designs reference existing V2 lineup components
</success_criteria>

<output>
After completion, create `.planning/phases/19-penpot-design-system/19-08-SUMMARY.md`
</output>
